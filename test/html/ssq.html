<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5"/>
  <meta name="format-detection" content="telephone=no,email=no,adress=no" />
  <title>全国高频彩票图表数据中心</title>
  <link rel="stylesheet" href="../css/basic.css"/>
  <link rel="stylesheet" href="../less/ssq.css"/>
</head>
<body>
<header>
  <ul>
    <li><span>期</span></li>
    <li><span>号</span></li>
  </ul>
  <ul>
    <li><span>红球分布</span></li>
    <li>
      <span>1</span>
      <span>2</span>
      <span>3</span>
      <span>4</span>
      <span>5</span>
      <span>6</span>
      <span>7</span>
      <span>8</span>
      <span>9</span>
      <span>10</span>
      <span>11</span>
      <span>12</span>
      <span>13</span>
      <span>14</span>
      <span>15</span>
      <span>16</span>
      <span>17</span>
      <span>18</span>
      <span>19</span>
      <span>20</span>
      <span>21</span>
      <span>22</span>
      <span>23</span>
      <span>24</span>
      <span>25</span>
      <span>26</span>
      <span>27</span>
      <span>28</span>
      <span>29</span>
      <span>30</span>
      <span>31</span>
      <span>32</span>
      <span>33</span>
    </li>
  </ul>
  <ul>
    <li><span>红球尾数</span></li>
    <li>
      <span>0</span>
      <span>1</span>
      <span>2</span>
      <span>3</span>
      <span>4</span>
      <span>5</span>
      <span>6</span>
      <span>7</span>
      <span>8</span>
      <span>9</span>
    </li>
  </ul>
  <ul>
    <li><span>和</span></li>
    <li><span></span></li>
    <li><span>值</span></li>
  </ul>
  <ul>
    <li><span>跨</span></li>
    <li><span></span></li>
    <li><span>度</span></li>
  </ul>
  <ul>
    <li><span>奇</span></li>
    <li><span>偶</span></li>
    <li><span>比</span></li>
  </ul>
  <ul>
    <li><span>蓝球分布</span></li>
    <li>
      <span>1</span>
      <span>2</span>
      <span>3</span>
      <span>4</span>
      <span>5</span>
      <span>6</span>
      <span>7</span>
      <span>8</span>
      <span>9</span>
      <span>10</span>
      <span>11</span>
      <span>12</span>
      <span>13</span>
      <span>14</span>
      <span>15</span>
      <span>16</span>
    </li>
  </ul>
  <ul>
    <li><span>大小</span></li>
    <li><span>大</span><span>小</span></li>
  </ul>
  <ul>
    <li><span>单双</span></li>
    <li><span>单</span><span>双</span></li>
  </ul>
  <ul>
    <li><span>012路</span></li>
    <li>
      <span>0</span>
      <span>1</span>
      <span>2</span>
    </li>
  </ul>
</header>
<section>
  <script id="tem" type="text/html">
    <ul>
      {{each table}}
      <li><span>{{$value.issue}}</span></li>
      {{/each}}
    </ul>
    <ul>
      <li><span>红球分布</span></li>
      <li>
        <span>1</span>
        <span>2</span>
        <span>3</span>
        <span>4</span>
        <span>5</span>
        <span>6</span>
        <span>7</span>
        <span>8</span>
        <span>9</span>
        <span>10</span>
        <span>11</span>
        <span>12</span>
        <span>13</span>
        <span>14</span>
        <span>15</span>
        <span>16</span>
        <span>17</span>
        <span>18</span>
        <span>19</span>
        <span>20</span>
        <span>21</span>
        <span>22</span>
        <span>23</span>
        <span>24</span>
        <span>25</span>
        <span>26</span>
        <span>27</span>
        <span>28</span>
        <span>29</span>
        <span>30</span>
        <span>31</span>
        <span>32</span>
        <span>33</span>
      </li>
    </ul>
    <ul>
      <li><span>红球尾数</span></li>
      <li>
        <span>0</span>
        <span>1</span>
        <span>2</span>
        <span>3</span>
        <span>4</span>
        <span>5</span>
        <span>6</span>
        <span>7</span>
        <span>8</span>
        <span>9</span>
      </li>
    </ul>
    <ul>
      <li><span>和</span></li>
      <li><span></span></li>
      <li><span>值</span></li>
    </ul>
    <ul>
      <li><span>跨</span></li>
      <li><span></span></li>
      <li><span>度</span></li>
    </ul>
    <ul>
      <li><span>奇</span></li>
      <li><span>偶</span></li>
      <li><span>比</span></li>
    </ul>
    <ul>
      <li><span>蓝球分布</span></li>
      <li>
        <span>1</span>
        <span>2</span>
        <span>3</span>
        <span>4</span>
        <span>5</span>
        <span>6</span>
        <span>7</span>
        <span>8</span>
        <span>9</span>
        <span>10</span>
        <span>11</span>
        <span>12</span>
        <span>13</span>
        <span>14</span>
        <span>15</span>
        <span>16</span>
      </li>
    </ul>
    <ul>
      <li><span>大小</span></li>
      <li><span>大</span><span>小</span></li>
    </ul>
    <ul>
      <li><span>单双</span></li>
      <li><span>单</span><span>双</span></li>
    </ul>
    <ul>
      <li><span>012路</span></li>
      <li>
        <span>0</span>
        <span>1</span>
        <span>2</span>
      </li>
    </ul>
  </script>
</section>



<script src="../js/zepto.min.js"></script>
<script src="../js/drawline.js"></script>
<!--<script src="../js/art-template.js"></script>-->
<script>
  (function(){
    var width=$(window).width();
    $("body,header").css("width",width*4);
  })();


  $.ajax({
    type:"POST",
    url: 'http://tubiao.baibaocp.com/ssq/table',
    data:{cdkey:123456,lotid:1,num:50,tid:6,tag:1},
    jsonp: 'jsonp_callback',
    dataType: 'jsonp',
    success: function(data) {
      if(typeof data !== 'object'){
        var data = $.parseJSON(data);
      }
      if(data.ret!=0){
        return;
      }
//      console.log(data.data.table);
      changeDom(data.data.table);
//      $("section").html(template('tem',data.data));
      drawLine();  // 画线
    }
  });

  function changeDom(table){  // 填充数据
    console.log(table);
    var uls=new Array(10);
    for(var i=0;i<uls.length;i++){    // 生成需要数量的ul
      uls[i]=new Array();
    }
    for(var j=0;j<table.length;j++){    // 遍历table数组，填充数据
      uls[0].push("<li><span>"+table[j].issue+"</span></li>");

      var redStr="";  // li中的span，红球
      var blueStr=""; // li中的span，蓝球
      for(var key in table[j]){

        if(key.substr(0,4)==="red_"){  // 红球
          if(table[j][key]==="0"){
            redStr+='<span class="red_ball">'+Number(key.slice(4))+'</span>';
          }else{    // 遗漏
            redStr+='<span>'+table[j][key]+'</span>';
          }
        }else if(key.substr(0,5)==="blue_"){  // 蓝球
          if(table[j][key]==="0"){
            blueStr+='<span class="blue_ball">'+Number(key.slice(5))+'</span>';
          }else{    // 遗漏
            blueStr+='<span>'+table[j][key]+'</span>';
          }
        }
      }
      uls[1].push("<li>"+redStr+"</li>");
      uls[6].push("<li>"+blueStr+"</li>");
    }


    console.log(uls);
    for(var k= 0,html="";k<uls.length;k++){  // 把所有的ul拼接起来
      html+="<ul>"+uls[k].join("")+"</ul>";
    }
    $("section").html(html);
  }




  //调用createLine函数，绘制所有的走势曲线
  function drawLine(){
    createLine({clas:"blue_ball",color:"#276DB6"});
  }
</script>
</body>
</html>